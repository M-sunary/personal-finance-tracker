# 个人财务管理器

一个功能齐全的个人财务管理应用，帮助您轻松管理日常收支，跟踪财务状况，并生成详细的统计报告。

## 📸 功能预览

### 主要功能
- 📊 **财务总览** - 一目了然的收支统计
- 💰 **交易管理** - 添加、编辑、删除收支记录
- 📈 **数据统计** - 日/月/年视图，分类统计分析
- 🏷️ **分类管理** - 自定义收支分类和颜色
- 💾 **数据备份** - 导入导出功能，数据永不丢失
- 📱 **响应式设计** - 完美适配桌面和移动设备

## 🚀 云端部署指南

将你的个人财务管理器部署到云端，实现 24/7 在线访问！

### 🥇 方案一：Vercel 部署（推荐）

**优势**：速度快、配置简单、免费额度充足、对 React 应用支持最好

#### 步骤：
1. **创建 GitHub 仓库**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/yourusername/personal-finance-tracker.git
   git push -u origin main
   ```

2. **部署到 Vercel**
   - 访问 [vercel.com](https://vercel.com) 并用 GitHub 账户登录
   - 点击 "New Project"
   - 选择你的 GitHub 仓库
   - Vercel 会自动识别为 React 项目并配置构建设置
   - 点击 "Deploy" 开始部署

3. **自动更新**
   - 每次推送到 main 分支都会自动重新部署
   - 支持预览部署（Pull Request 自动生成预览链接）

#### 免费额度：
- 100GB 带宽/月
- 无限静态文件托管
- 自动 HTTPS
- 全球 CDN 加速

---

### 🥈 方案二：Netlify 部署

**优势**：功能丰富、表单处理、分支预览、构建插件生态

#### 步骤：
1. **推送代码到 GitHub**（同上）

2. **部署到 Netlify**
   - 访问 [netlify.com](https://netlify.com) 并登录
   - 点击 "New site from Git"
   - 选择 GitHub 并授权
   - 选择你的仓库
   - 构建设置会自动读取 `netlify.toml` 配置
   - 点击 "Deploy site"

3. **自定义域名**
   - 在 Site settings > Domain management 中添加自定义域名
   - 支持免费的 `.netlify.app` 子域名

#### 免费额度：
- 100GB 带宽/月
- 300 分钟构建时间/月
- 表单提交支持
- 分支预览

---

### 🥉 方案三：GitHub Pages（完全免费）

**优势**：完全免费、与 GitHub 深度集成、适合开源项目

#### 步骤：
1. **修改 package.json**
   ```json
   {
     "homepage": "https://yourusername.github.io/personal-finance-tracker"
   }
   ```

2. **推送代码**
   ```bash
   git add .
   git commit -m "Add GitHub Pages deployment"
   git push origin main
   ```

3. **启用 GitHub Pages**
   - 在 GitHub 仓库设置中找到 "Pages" 部分
   - Source 选择 "GitHub Actions"
   - GitHub Actions 会自动运行部署流程

4. **访问站点**
   - 部署完成后访问：`https://yourusername.github.io/personal-finance-tracker`

#### 免费额度：
- 完全免费
- 无带宽限制
- 仅支持静态站点
- 1GB 存储空间

---

### 🌐 自定义域名配置

#### 在 Vercel 中添加自定义域名：
1. 在项目设置中点击 "Domains"
2. 添加你的域名（如 `finance.yourdomain.com`）
3. 在域名提供商处添加 CNAME 记录：
   ```
   CNAME finance cname.vercel-dns.com
   ```

#### 在 Netlify 中添加自定义域名：
1. 在 Site settings > Domain management 中点击 "Add custom domain"
2. 添加域名后，在 DNS 设置中添加：
   ```
   CNAME finance your-site-name.netlify.app
   ```

#### 在 GitHub Pages 中添加自定义域名：
1. 在仓库根目录创建 `CNAME` 文件，内容为你的域名
2. 在域名提供商处添加 CNAME 记录指向 `yourusername.github.io`

---

### 📊 部署平台对比

| 特性 | Vercel | Netlify | GitHub Pages |
|------|--------|---------|--------------|
| **构建速度** | 🟢 非常快 | 🟡 快 | 🟡 中等 |
| **免费带宽** | 100GB/月 | 100GB/月 | 无限制 |
| **自动部署** | ✅ | ✅ | ✅ |
| **分支预览** | ✅ | ✅ | ❌ |
| **自定义域名** | ✅ | ✅ | ✅ |
| **HTTPS** | ✅ 自动 | ✅ 自动 | ✅ 自动 |
| **CDN** | ✅ 全球 | ✅ 全球 | ✅ 基础 |
| **构建时间** | 无限制 | 300分钟/月 | 2000分钟/月 |
| **易用性** | 🟢 极简 | 🟡 中等 | 🟡 需要配置 |

### 🎯 推荐选择

- **个人使用 + 最佳性能**：选择 **Vercel**
- **需要额外功能**（表单、函数等）：选择 **Netlify**
- **完全免费 + 开源项目**：选择 **GitHub Pages**

### 🔄 持续集成

所有平台都支持：
- ✅ 自动构建和部署
- ✅ 推送到 main 分支自动更新
- ✅ 构建失败通知
- ✅ 部署历史和回滚

### 📱 移动端优化

部署后的应用已针对移动端优化：
- 响应式设计
- PWA 支持（可添加到主屏幕）
- 离线数据存储
- 触摸友好的界面

---

### 环境要求
- Node.js 16.0 或更高版本
- npm 7.0 或更高版本

### 安装步骤

1. **克隆项目**
   ```bash
   git clone <项目地址>
   cd personal-finance-tracker
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **启动开发服务器**
   ```bash
   npm start
   ```
   
   应用将在 [http://localhost:3000](http://localhost:3000) 启动

4. **构建生产版本**
   ```bash
   npm run build
   ```

## 📖 详细操作手册

### 1. 界面导航

应用采用标签页设计，顶部导航栏包含四个主要模块：

- **总览** - 显示财务概况和最近交易
- **交易** - 专注于交易记录管理
- **统计** - 详细的数据分析和图表
- **设置** - 分类管理和数据导入导出

### 2. 添加交易记录

#### 2.1 基本操作
1. 在任意包含"添加交易记录"表单的页面（总览或交易页面）
2. 选择交易类型：
   - **支出**（红色按钮）- 记录花费
   - **收入**（绿色按钮）- 记录收入
3. 填写必要信息：
   - **金额** - 输入数字，支持小数点
   - **分类** - 从下拉菜单选择（会根据收支类型自动筛选）
   - **备注** - 可选，添加详细说明
   - **日期** - 默认为今天，可修改

#### 2.2 注意事项
- 金额和分类为必填项
- 切换收支类型时，分类会自动重置
- 日期格式为 YYYY-MM-DD

### 3. 管理交易记录

#### 3.1 查看记录
- 交易记录按日期倒序排列（最新的在上面）
- 每条记录显示：分类颜色点、分类名称、备注、日期、金额

#### 3.2 编辑记录
1. 点击记录右侧的 ✏️ 编辑图标
2. 在弹出的编辑窗口中修改信息
3. 点击"保存"确认修改，或"取消"放弃更改

#### 3.3 删除记录
1. 点击记录右侧的 🗑️ 删除图标
2. 确认删除操作（此操作不可撤销）

### 4. 数据统计功能

#### 4.1 切换视图模式
在统计页面顶部，可以切换三种视图：
- **日** - 查看单日收支情况
- **月** - 查看整月收支统计
- **年** - 查看全年收支趋势

#### 4.2 日期选择
- **日视图**：选择具体日期（格式：2024-01-15）
- **月视图**：选择年月（格式：2024-01）
- **年视图**：输入年份（格式：2024）

#### 4.3 统计信息
每个视图都会显示：
- **总收入** - 绿色显示
- **总支出** - 红色显示
- **净收支** - 蓝色（正数）或橙色（负数）
- **交易笔数** - 该时间段内的交易总数

#### 4.4 分类统计
页面下方会显示分类统计，包括：
- 每个分类的消费金额
- 该分类的交易笔数
- 按金额从高到低排序

### 5. 分类管理

#### 5.1 访问分类管理
点击顶部导航的"设置"标签页进入分类管理界面

#### 5.2 查看现有分类
分类分为两列显示：
- **左列**：收入分类（绿色标题）
- **右列**：支出分类（红色标题）

#### 5.3 添加新分类
1. 点击"添加分类"按钮
2. 填写分类信息：
   - **分类名称** - 必填，如"餐饮"、"工资"等
   - **类型** - 选择"收入"或"支出"
   - **颜色** - 从预设颜色中选择
3. 点击"保存"完成添加

#### 5.4 编辑分类
1. 点击分类右侧的 ✏️ 编辑图标
2. 修改分类名称或颜色
3. 点击 ✅ 保存或 ❌ 取消

#### 5.5 删除分类
1. 点击分类右侧的 🗑️ 删除图标
2. 确认删除（不会删除相关的交易记录）

### 6. 数据管理

#### 6.1 数据导出

**导出 CSV 格式：**
1. 在设置页面点击"导出CSV"按钮
2. 文件将自动下载，包含所有交易记录
3. 适用于 Excel、Google Sheets 等表格软件

**导出 JSON 格式：**
1. 点击"导出JSON"按钮
2. 下载完整的数据文件（包含交易记录和分类）
3. 适用于数据备份和迁移

#### 6.2 数据导入
1. 点击"导入数据"按钮
2. 选择之前导出的 JSON 文件
3. 确认导入（⚠️ 将覆盖现有数据）
4. 页面会自动刷新，显示导入的数据

#### 6.3 数据安全
- **双重存储保护**：主要数据存储在 IndexedDB 中，同时自动备份到 LocalStorage
- **IndexedDB 优势**：
  - 更大的存储容量（通常 250MB+ vs localStorage 的 5-10MB）
  - 更稳定的数据持久化，不易被清理
  - 支持事务操作，数据一致性更好
  - 异步操作，不阻塞 UI
- **LocalStorage 备份**：当 IndexedDB 不可用时自动降级使用
- **自动恢复机制**：应用启动时会检查数据完整性并自动恢复
- **定期备份数据**，避免数据丢失
- **更换设备时需要先导出数据**

### 7. 存储状态监控

应用现在提供详细的存储状态信息：

#### 7.1 存储状态面板
在设置页面可以查看：
- **IndexedDB 状态**：主要存储方式的可用性
- **LocalStorage 状态**：备份存储的可用性  
- **最后同步时间**：备份数据的更新时间
- **数据统计**：当前存储的交易记录和分类数量

#### 7.2 数据安全指标
- ✅ **绿色**：存储系统正常工作
- ⚠️ **黄色**：部分存储不可用，使用备用方案
- ❌ **红色**：存储系统异常，需要检查

#### 7.3 故障恢复
- **IndexedDB 故障**：自动切换到 LocalStorage
- **数据丢失**：从备份中恢复数据
- **初始化失败**：显示错误信息并提供重新加载选项

### 8. 预设分类说明

#### 收入分类
- 工资 - 月薪、年终奖等
- 兼职 - 兼职收入、临时工作
- 投资收益 - 股票、基金、理财产品收益
- 其他收入 - 礼金、退款等

#### 支出分类
- 餐饮 - 日常用餐、外卖、聚餐
- 交通 - 公交、地铁、打车、油费
- 购物 - 日用品、服装、电子产品
- 娱乐 - 电影、游戏、旅游
- 住房 - 房租、水电费、物业费
- 医疗 - 看病、买药、体检
- 其他支出 - 未分类的支出

## 🛠 技术架构

### 前端技术栈
- **React 19** - 现代化的用户界面框架
- **TypeScript** - 类型安全的 JavaScript
- **React Context** - 全局状态管理
- **date-fns** - 日期处理库
- **Lucide React** - 现代化图标库

### 项目结构
```
src/
├── components/          # React 组件
│   ├── CategoryManagement.tsx    # 分类管理
│   ├── EditTransactionModal.tsx  # 编辑交易模态框
│   ├── Statistics.tsx            # 统计页面
│   ├── TransactionForm.tsx       # 交易表单
│   └── TransactionList.tsx       # 交易列表
├── context/             # 状态管理
│   └── AppContext.tsx            # 应用上下文
├── types/               # TypeScript 类型定义
│   └── index.ts
├── utils/               # 工具函数
│   └── index.ts                  # 通用工具函数
├── App.tsx              # 主应用组件
└── index.tsx            # 应用入口
```

## 🔧 开发指南

### 可用脚本

- `npm start` - 启动开发服务器
- `npm test` - 运行测试套件
- `npm run build` - 构建生产版本
- `npm run eject` - 弹出 CRA 配置（不可逆）

### 本地开发
1. 修改代码后，开发服务器会自动重新加载
2. 控制台会显示 lint 错误和警告
3. 使用浏览器开发者工具进行调试

### 生产部署
1. 运行 `npm run build` 创建优化后的生产版本
2. 将 `build` 文件夹部署到静态文件服务器
3. 推荐使用 `serve -s build` 进行本地测试

## 📝 更新日志

### v1.0.0 (2024-01-XX)
- ✅ 基础交易记录功能
- ✅ 分类管理系统
- ✅ 数据统计和可视化
- ✅ 数据导入导出功能
- ✅ 响应式设计
- ✅ 本地数据存储

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来改进这个项目！

### 报告问题
- 详细描述问题现象
- 提供复现步骤
- 包含错误截图（如有）

### 功能建议
- 详细描述建议的功能
- 说明使用场景
- 考虑实现的可行性

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 💡 常见问题

### Q: 数据存储在哪里？
A: 应用使用双重存储保护：
- **主要存储**：IndexedDB（浏览器数据库，更安全稳定）
- **备份存储**：LocalStorage（传统本地存储，作为备份）
- 所有数据仅在本地设备上，不会上传到服务器

### Q: IndexedDB 相比 localStorage 有什么优势？
A: IndexedDB 提供了更好的数据安全性：
- **更大容量**：通常支持 250MB+ 存储空间（vs localStorage 的 5-10MB）
- **更稳定**：不容易被浏览器清理或丢失
- **事务支持**：确保数据一致性，避免损坏
- **异步操作**：不会阻塞用户界面

### Q: 如何备份数据？
A: 应用提供多重备份保护：
- **自动备份**：每次操作后自动备份到 LocalStorage
- **手动导出**：使用设置页面的"导出JSON"功能
- **建议**：定期手动导出数据到文件，作为额外保护

### Q: 如果 IndexedDB 不可用怎么办？
A: 应用内置了完整的降级机制：
- 自动检测 IndexedDB 可用性
- 无法使用时自动切换到 LocalStorage
- 从备份数据中恢复信息
- 在存储状态面板中显示当前状态

### Q: 支持多设备同步吗？
A: 目前不支持自动同步，但可以通过导入导出实现：
1. 在设备A导出数据（JSON格式）
2. 在设备B导入相同的JSON文件
3. 建议定期备份以保持数据同步

### Q: 数据会丢失吗？
A: 新的存储系统大大降低了数据丢失风险：
- **双重保护**：IndexedDB + LocalStorage 备份
- **自动恢复**：启动时检查并恢复数据
- **错误处理**：存储失败时提供明确提示
- **建议**：仍建议定期手动导出重要数据

### Q: 可以删除预设分类吗？
A: 可以，删除分类不会影响已有的交易记录。

### Q: 如何查看存储状态？
A: 在设置页面顶部的"存储状态"面板中可以查看：
- IndexedDB 和 LocalStorage 的可用性
- 最后备份同步时间
- 当前数据统计信息

### Q: 支持多账户管理吗？
A: 目前版本为单用户设计，后续版本可能会增加多账户功能。

---

**开始管理您的财务吧！** 🎯
